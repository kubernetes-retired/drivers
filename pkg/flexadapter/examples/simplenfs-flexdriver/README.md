# CSI-Flex NFS driver

# Requirements

The following feature gates and runtime config have to be enabled to deploy the driver

```
FEATURE_GATES=CSIPersistentVolume=true,MountPropagation=true
RUNTIME_CONFIG="storage.k8s.io/v1alpha1=true"
```

Mountpropagation requires support for privileged containers. So, make sure privileged containers are enabled in the cluster.

## Example local-up-cluster.sh

```ALLOW_PRIVILEGED=true FEATURE_GATES=CSIPersistentVolume=true,MountPropagation=true RUNTIME_CONFIG="storage.k8s.io/v1alpha1=true" LOG_LEVEL=5 hack/local-up-cluster.sh```


# Deploy in Kubernetes

```kubectl -f deploy/kubernetes create```

# Example Nginx application

``` kubectl -f examples/kubernetes/nginx.yaml create```
